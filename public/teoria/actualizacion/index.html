<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Actualización</title>
  
    

    <link rel="stylesheet" href="http://aed.wfrre3.local/css/materialize.css">
    <link rel="stylesheet" href="http://aed.wfrre3.local/css/main.css">
    <link rel="stylesheet" href="http://aed.wfrre3.local/icons/material-icons.css">
    <link href="https://fonts.googleapis.com/css?family=Share+Tech+Mono" rel="stylesheet">
  
  
    <link rel="shortcut icon" href="http://aed.wfrre3.local/img/favicon.ico" type="image/x-icon" />
  
  </head>


  <body>
    <main>

        
 <ul id="slide-out" class="sidenav sidenav-fixed collapsible">
      <li class="logo">
        <a id="logo-container" href="/" class="brand-logo">
          <object id="front-page-logo" type="image/svg+xml" data="http://aed.wfrre3.local/img/mobile.svg">Your browser does not support SVG</object>
        </a>
        <h5>aed.io</h5>
      </li>      
      <li class="no-padding">
         <ul class="collapsible collapsible-accordion">
             
             
                                  
                     <li>
                         <a href="/">Inicio</a>
                     </li>
                 
             
                                  
                     <li>
                         <a href="/plan/">Planificación</a>
                     </li>
                 
             
                                  
                     <li>
                         <a href="/cron/">Cronograma</a>
                     </li>
                 
             
                 
                     </li>
                     <li class="active">
                         <a class="collapsible-header waves-effect waves-teal" href="#">Teoría</a>
                        <div class="collapsible-body">
                          <ul>
                                                                
                                  <li><a href="/teoria/cortedecontrol/">Corte de Control</a></li>
                                                              
                                  <li><a href="/teoria/mezcla/">Mezcla</a></li>
                                                              
                                  <li><a href="/teoria/actualizacion/">Actualización</a></li>
                                                              
                                  <li><a href="/teoria/arreglos/">Arreglos</a></li>
                                                              
                                  <li><a href="/teoria/listas/">Listas</a></li>
                            
                          </ul>
                        </div>
                    </li>
                 
             
                 
                     </li>
                     <li class="">
                         <a class="collapsible-header waves-effect waves-teal" href="#">Trabajos Prácticos</a>
                        <div class="collapsible-body">
                          <ul>
                                                                
                                  <li><a href="/tps/tp2.1/">TP 2.1</a></li>
                                                              
                                  <li><a href="/tps/tp2.2/">TP 2.2</a></li>
                                                              
                                  <li><a href="/tps/tp2.3/">TP 2.3</a></li>
                                                              
                                  <li><a href="/tps/tp3.1/">TP 3.1</a></li>
                                                              
                                  <li><a href="/tps/tp4.1/">TP 4.1</a></li>
                                                              
                                  <li><a href="/tps/tp4.2/">TP 4.2</a></li>
                                                              
                                  <li><a href="/tps/tp5.1/">TP 5.1</a></li>
                                                              
                                  <li><a href="/tps/tp5.2/">TP 5.2</a></li>
                            
                          </ul>
                        </div>
                    </li>
                 
             
                                  
                     <li>
                         <a href="/acerca/">Acerca de</a>
                     </li>
                 
                          
         </ul>
        </li>
    </ul>

<div class="fixed-action-btn">
<a href="#" data-target="slide-out" class="top-nav sidenav-trigger full hide-on-large-only btn-floating pulse"><i class="material-icons">menu</i></a></div>

<div class="container">
	<div class="header">
	  <h1 class="title">Actualización</h1>
	  <p class="light">Vamos a ver un poco de teoria sobre los actualización</p>
	</div>
	<div class="section">
		<div class="row">
			

<h5 id="tipos-de-actualización"><strong>Tipos de Actualización</strong></h5>

<p><strong>POR LOTES</strong><br />
Varios registros de movimiento para un registro maestro.</p>

<p><strong>UNITARIA</strong><br />
Un registro movimiento para un registro maestro.</p>

<h5 id="ficheros"><strong>Ficheros</strong></h5>

<p><strong>Ficheros de entrada:</strong> por lo menos dos: MAESTRO Y MOVIMIENTOS.<br />
<strong>Ficheros de salida:</strong> como mínimo uno.</p>

<h6 id="tipos-de-ficheros-maestros"><strong>Tipos de Ficheros Maestros</strong></h6>

<ul>
<li>Histórico</li>
<li>Común o Normal</li>
</ul>

<h6 id="tipos-de-ficheros-de-movimientos"><strong>Tipos de Ficheros de Movimientos</strong></h6>

<ul>
<li>Actualización General o Combinado</li>
<li>Actualización Parcial o Individual</li>
</ul>

<h6 id="tipos-de-movimientos"><strong>Tipos de Movimientos</strong></h6>

<ul>
<li>Alta</li>
<li>Baja</li>
<li>Modificación</li>
</ul>

<h5 id="algoritmo-actualización-unitaria"><strong>Algoritmo Actualización Unitaria</strong></h5>

<p>Utilizando ciclo incluyente</p>

<pre><code>Accion Act_Uni es  
  Algoritmo  
    Abrir_Archivos
    Leer_Maestro
    Leer_Movimiento
    Mientras (Clave_Mae &lt;&gt; HV) o (Clave_Mov &lt;&gt; HV) hacer
      Si (Clave_Mae = Clave_Mov) entonces 
        Proceso_Iguales
      sino
        Si (Clave_Mae &lt; Clave_Mov) entonces
          Reg_sal:= Reg_mae 
          Escribir(Arch_sal, Reg_sal)
          Leer_Maestro
        sino
          Proceso_Distintos
        Fin Si
      Fin Si
    Fin Mientras
    Cerrar_Archivos
Fin Accion
  
Subaccion Leer_Movimiento es
  Leer(Arch_mov, Reg_mov)
  Si FDA(Arch_mov) entonces
    Clave_mov:= HV
  Fin Si
Fin Subaccion
 
Subaccion Leer_Maestro es
  Leer(Arch_mae, Reg_mae)
  Si FDA(Arch_mae) entonces
    Clave_mae : = HV
  Fin Si
Fin Subaccion

Subacción Proceso_Iguales es
  Si Reg_mov.Cod_mov = 'ALTA' entonces
    Escribir('Error alta no existe')
    Reg_sal:= Reg_mae
    Escribir(Arch_sal, Reg_sal)
  Sino 
    Si (Reg_mov.Cod_Mov = 'MODIF') entonces 
      Proceso_Mod_Maestro
      Reg_sal : = Reg_mae
      Escribir(Arch_sal, Reg_sal)
    Sino // eliminación lógica
      Marcar_Registro
      Reg_sal:= Reg_mae
      Escribir(Arch_sal, Reg_sal)
    Fin Si
  Fin Si
  Leer_Maestro
  Leer_Movimiento
Fin Subacción.

Subaccion Proceso_Distintos es
  Si (Reg_mov.Cod_Mov = 'BAJA') entonces 
    Escribir('Error baja no existe')
  Sino 
    Si (Reg_mov.Cod_Mov = 'MODIF') entonces  
      Escribir('Error mofificación no existe')
    Sino // Asigna campo por campo, porque Reg_sal y Reg_mov tienen distinto formato
      Reg_sal.clave:= Reg_mov.clave
      Reg_sal.campo1:= Reg_mov.campo1
      Reg_sal.campo2:= Reg_mov.campo2
      ........
      Reg_sal.campoN:= Reg_mov.campoN
      Reg_sal.Marca_baja:= ''          
      Escribir(Arch_sal, Reg_sal)
    Fin Si
  Fin Si
  Leer_Movimiento
Fin Subaccion

Subaccion Proceso_Modif_Maestro es
  Si (Reg_Mov.campo1 &lt;&gt; '') entonces  
    Reg_mae.campo1:= Reg_mov.campo1
  Fin Si
  Si (Reg_Mov.campo2 &lt;&gt; '') entonces
    Reg_mae.campo2 := Reg_mov.campo2
  Fin Si
  Si (Reg_Mov.campo3 &lt;&gt; '') entonces
    Reg_mae.campo3 := Reg_mov.campo3
  Fin Si
    // ... y así sucesivamente para todos los campos del registro...
Fin Subaccion

Subaccion Marcar_Registro es
  Reg_mae.Marca_baja:= '*'     // en vez de asterisco, se puede asignar la fecha del día,
                                   o cualquier otro dato, según el problema //
Fin Subaccion


</code></pre>

<h2 id="actualizacion-secuencial-por-lotes">Actualizacion Secuencial Por lotes</h2>

<h5 id="consideraciones">Consideraciones:</h5>

<ul>
<li>Utilizamos un ciclo <strong>incluyente</strong>.</li>
<li>Los tipos de movimientos son:

<ul>
<li>Alta: Siempre el primer registro va a ser del tipo alta, y luego modificaciones.</li>
<li>Modificacion: pueden existir varias modificaciones a un maestro.</li>
<li>Baja: son bajas logicas. Solo el ultimo movimiento puede ser una baja logica.</li>
<li>No existen altas o bajas entre las modificaciones.</li>
</ul></li>
</ul>

<h5 id="ambiente">Ambiente:</h5>

<p>El ambiente esta formado por 2 archivos con la siguiente estructura:</p>

<pre><code>
Formato_Clave = Registro
  clave1: ...
  clave2: ...
  ...
  claven: ...
fin registro

formato_Maestro = Registro
  clave: formato_clave
  campo1: ...
  campo2: ...
  ...
  campon: ...
  Marca_baja: ...
fin registro

formato_Movimiento = Registro
  clave: formato_clave
  campo1: ...
  campo2: ...
  ...
  campon: ...
  cod_mov: (&quot;A&quot;, &quot;M&quot;, &quot;B&quot;)
fin registro

mae, mae_sal: archivo de formato_Maestro ordenado por clave
reg_sal, reg_mae, aux: formato_Maestro

mov: archivo de formato_movimiento ordenado por clave
reg_mov: formato_movimiento

</code></pre>

<h5 id="algoritmo-principal">Algoritmo Principal:</h5>

<pre><code>Abrir_Archivos
Leer_Maestro
Leer_Movimiento
MIENTRAS (reg_mov.clave &lt;&gt; High_Value) o (reg_mae.clave &lt;&gt; High_Value) HACER
  SI Creg_mae.clave &lt; Creg_mov.clave ENTONCES 
    //Maestro sin Movimiento
    Reg_sal : = Reg_mae
    ESCRIBIR(mae_sal, Reg_sal)
    Leer_Maestro
  SINO 
    SI Creg_mae.clave = Creg_mov.clave Movimiento
      aux : = reg_mae
      MIENTRAS (Creg_mae.clave = Creg_mov.clave) HACER
        Proceso_Movim
        Leer_Movimiento
      Fin Mientras
      reg_sal : = Aux
      ESCRIBIR(mae_sal, reg_sal)
      Leer_Maestro
    SINO 
      // Movimiento sin Maestro ~ 1 Alta y 0-1 Modific. y/o Bajas 
      // Asigna campo por campo, porque Aux y Reg_mov tienen distinto formato 
      Aux.clave  := Reg_mov.clave
      Aux.campo1 := Reg_mov.campo3
      Aux.campo2 := Reg_mov.campo4
      ........
      Aux.campon := Reg_mov.campon
      Aux.Marca_baja := &quot;&quot;
      Leer_Movimiento
      MIENTRAS (Clave_Aux = Clave_Mov) HACER
        Proceso_Movim
        Leer_Movimiento
      FMientras
      reg_sal : = aux
      ESCRIBIR(mae_sal, reg_sal)
    FIN SI
  FIN SI
FIN MIENTRAS

CERRAR(mae)
CERRAR(mae_sal)
CERRAR(mov)
</code></pre>

<h5 id="subacciones">Subacciones</h5>

<pre><code>
Subacción Leer_Movimiento es
  LEER(mov, Reg_mov)
  SI FDA(mov) ENTONCES 
    reg_mov.clave := High_value
  FSI;
FAcción

Subacción Leer_Maestro es
  LEER(mae, reg_mae)
  SI FDA(mae) ENTONCES 
    reg_mae.clave : = High_value
  FSI;
FAcción

Subacción Proceso_Movim es
  //Comparar la información del Registro de Movimientos y, de acuerdo a los valores que
  //tengan, y alterar los contenidos del Registro Auxiliar (Aux). 
  SI reg_mov.Cod_Mov = &quot;M&quot; ENTONCES 
    //Modificación 
    Proceso_modif_maestro
  SINO 
    SI reg_mov.Cod_Mov = &quot;B&quot; ENTONCES 
      //eliminación lógica 
      Marcar_registro
    Fsi
  Fsi
FAcción

Subacción Proceso_modif_maestro es
  Si Reg_Mov.campo1 &lt;&gt; &quot;&quot; entonces 
    // No se actualizan los campos claves.
    Aux.campo1 := Reg_mov.campo1
  fsi;
  Si Reg_Mov.campo2 &lt;&gt; &quot;&quot; entonces 
    Aux.campo2 := Reg_mov.campo2
  fsi;
  ..............................
  //... y así sucesivamente para todos los campos del registro...
  ..............................
  Si Reg_Mov.campon &lt;&gt; &quot;&quot; entonces 
    Aux.campon := Reg_mov.campon
  fsi;
FAcción.

Subacción Marcar_registro es
  //en vez de asterisco, se puede asignar la fecha del día,
  //o cualquier otro dato, según el problema 
  Aux.Marca_baja:= &quot;*&quot;
FAcción.

</code></pre>

<h5 id="modificar">Modificar:</h5>

<ul>
<li>Que pasa si se pide que se tengan en cuenta los siguientes errores:

<ul>
<li>Las altas no siempre estan al principio.</li>
<li>Las bajas no siempre estan al final.</li>
</ul></li>
</ul>

<h2 id="actualizacion-indexada">Actualizacion Indexada</h2>

<h5 id="consideraciones-1">Consideraciones:</h5>

<ul>
<li>Archivo maestro indexado por clave</li>
<li>Se ingresan movimientos por terminal
<br /></li>
</ul>

<h5 id="ambiente-1">Ambiente</h5>

<p>El ambiente esta formado por 1 solo archivos con la siguiente estructura:</p>

<pre><code>
formato_mae = Registro
  clave: formato_clave
  campo1: ...
  campo2: ...
  ...
  campon: ...
  Marca_baja: ...
fin registro

arch_mae: Archivo de formato_mae indexado por clave.
reg_mae: formato

cod_mov: AN(1)

valido = ('A', 'B', 'C')

clave: formato_clave

</code></pre>

<h5 id="algoritmo">Algoritmo</h5>

<pre><code>Abrir E/S (arch)

Escribir (‘Por favor ingrese la clave a procesar y el código de movimiento (A: incorporaciones, B: bajas, M: modificaciones) Para finalizar ingrese cualquier otra letra.’) 

Leer(clave, cod_mov)

MIENTRAS (cod_mov en valido) HACER
  reg_mae.clave := clave
  LEER (arch_mae, reg_mae)

  SI no existe ENTONCES 
    SI cod_mov = 'B' ENTONCES 
      ESCRIBIR(‘Error baja no existe’)
    SINO 
      SI cod_mov = 'M' ENTONCES
        ESCRIBIR(‘Error modificación no existe’)
      SINO  
        // Ingresar por teclado los datos correspondientes a la nueva clave 
        LEER(reg_mae.campo1)
        LEER(reg_mae.campo2)
        ...
        LEER(reg_mae.campon)
        ESCRIBIR(arch_mae, reg_mae)
      FSI
    FSI 
  SINO 
    SI cod_mov = 'A' ENTONCES
      ESCRIBIR(‘Error clave existe, alta no es posible’)
    SINO 
      SI cod_mov = 'M' ENTONCES 
        // Ingresar por teclado los datos que se desean modificar 
        LEER(campo1)
        SI campo1 &lt;&gt; '' ENTONCES 
          reg_mae.campo1 := campo1
        FSI
        LEER(campo2)
        SI campo2 &lt;&gt; '' ENTONCES 
          reg_mae.campo2 := campo2
        FSI
        ...
        LEER(campon)
        SI campon &lt;&gt; '' ENTONCES 
          reg_mae.campon := campon
        FSI
        RE-ESCRIBIR(arch_mae, reg_mae)
      SINO   
      // Baja lógica 
        reg_mae.Marca_baja := &quot;*&quot;
        RE-ESCRIBIR(arch_mae, Reg_mae)
      // Baja Física
        BORRAR(arch_mae, reg_mae)
      FSI
    FSI
  FSI


  ESCRIBIR (‘Por favor ingrese la clave a procesar y el código de movimiento (A: incorporaciones, B: bajas, M: odificaciones) Para finalizar ingrese cualquier otra letra.’) 

  LEER(clave, cod_mov)

FIN MIENTRAS

CERRAR(arch_mae)

</code></pre>

	    </div>
	</div>
</div>

	</main>
	<script src="http://aed.wfrre3.local/js/jquery-3.3.1.min.js"></script>
	<script src="http://aed.wfrre3.local/js/main.js"></script>
	<script src="http://aed.wfrre3.local/js/materialize.js"></script>
	<footer class="page-footer blue">
		<div class="footer-copyright">
	    	<div class="container">
	        	Universidad Tecnologíca Nacional - Facultad Regional Resistencia	            
	        </div>
	    </div>
	</footer>

</body>

</html>


